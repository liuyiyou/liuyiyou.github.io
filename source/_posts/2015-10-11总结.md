title:  "2015-10-11总结"
date: "2015/10/11"
categories: 
  - 总结
tags:
    - mysql
---

好吧，其实在我写这篇总结的时候，已经是12号的晚上十点。因为上周末回去的时候，电源没有带回来，等看完天天向上和爸爸去哪儿之后电量已经明显不足，只得关机到今天才补上。

### 写sql语句

其实这周还是有些收获的，这周主要是些SQL，好像从工作开始就很少写sql、第一家公司使用的是JPA，压根很少些sql、一般都通过jpa就完成了。所以那个时候我连LEFT JOIN之类的连接查询都不会写，在大学里的那点都已经差不多全部还给老师了。

第二家公司的时候没有用JPA而是用的MyBatis，不过依然还是很少写sql、因为系统主要以维护为主，很少添加新功能。不过通过维护和阅读别人写的代码还是渐渐了解了sql。当然仅仅是了解，离精通还有十万八千里，sql调优之类的也只是知道一点点而已，不过连接查询还是会写了。

到现在的这家公司，因为刚开始，一切都是起步，所以也有幸基本从头到尾参与到一个或者多个项目中，不过直到现在的bdp项目之后，才感觉有比较大的收获，对sql也渐渐熟悉起来了。

写sql主要对业务逻辑和sql执行顺序有比较好的了解，不过两者我都不熟悉，所以开始写得比较慢，而且错误还比较多。不过一周之后也慢慢熟悉了业务和sql。相比于自己琢磨或者写demo，实际的项目更加锻炼人。而自己的项目很少会写那么复杂的sql。 所以这周收获比较大。


### jQuery.DataTable插件的使用

第二还是jQuery.DataTable的使用。上上周完成了基本的功能，这周对这个插件又熟悉了不少，不过还不够。等我自认为熟悉了之后，会写一篇使用中的注意事项。

### Echarts的使用

这个还是最基本的使用。不过貌似很强大。



### 附：某个sql。 以后看能不能再优化

```sql

SELECT  
keyword.stat_day AS statDay, #日期
keyword.cate,  #业务
keyword.promotion_account AS promotionAccount,
keyword.plan_id AS planId,
keyword.promotion_plan AS promotionPlan,
keyword.unit_id AS unitId ,
keyword.promotion_unit AS promotionUnit,
keyword.keywordid AS keywordId,
keyword.keyword AS keyword,
keyword.hmsr ,
keyword.terminal_type AS terminalType ,
SUM(keyword.click) AS click ,# 点击量
SUM(keyword.impression) AS impression , #展现量
SUM(keyword.cost) AS cost , #消费金额
keyword.ctr, #点击率 Click/Impression
keyword.cpc, #平均点击价格 CPC = Cost / Click  
keyword.cpm, #千次展现消费 CPM = Cost / Impressions *1000
SUM(keyword.pv) AS pv, #pv
SUM(keyword.uv) AS uv, #uv
SUM(keyword.uv) AS renjunPv, # 人均PV= pv /uv
SUM(keyword.bounces) AS bounces , #跳出次数
SUM(keyword.bounces) AS  tiaochulv  ,  #跳出率 = 提出次数/UV
SUM(keyword.home_clicks)  AS homeClicks, #广告点击次数
SUM(keyword.home_clicks)  AS  didalv  ,  #抵达率 = 广告点击次数/UV
SUM(keyword.order_count) AS orderCount, #下单量
SUM(keyword.order_custom) AS orderCustom , #下单人数
SUM(keyword.user_new_order_count) AS userNewOrderCount, #新客户下单数
SUM(keyword.order_user_old_count) AS userOldOrderCount ,#老客户下单数
SUM(keyword.bind_custom_count) AS bindCustomCount, #绑定优惠券用户数
SUM(keyword.bind_new_custom_count) AS bindNewCustomCount , #绑定优惠券新用户数
SUM(keyword.pay_custom) AS payCustom ,#充值客户数
SUM(keyword.download_app_custom) AS downloadAppCustom # 活动下载App人数
FROM
(
SELECT
keyword.stat_day , #日期
keyword.cate,  #业务
keyword.promotion_account ,
keyword.plan_id ,
keyword.promotion_plan ,
keyword.unit_id  ,
keyword.promotion_unit ,
keyword.keywordid ,
keyword.keyword ,
keyword.hmsr ,
daojia_home.hmsr   AS detailHmsr,
keyword.terminal_type,
keyword.cate_code ,
keyword.click   ,
keyword.cost  ,
keyword.impression,
keyword.ctr, #点击率 Click/Impression
keyword.cpc, #平均点击价格 CPC = Cost / Click  
keyword.cpm, #千次展现消费 CPM = Cost / Impressions *1000
SUM(daojia_home.pv) AS pv ,  # 933 这和bdp中的pv uv有什么区别
SUM(daojia_home.uv) AS uv ,   # 394
#daojia_home.pv_count as pv,  #129
#daojia_home.uv_count as uv, #76
#SUM(daojia_home.pv_count) AS pv,  #2653
#SUM(daojia_home.uv_count) AS uv, #1220
SUM(daojia_home.bounces)  AS bounces,
SUM(daojia_home.home_clicks)  AS home_clicks ,
SUM(daojia_home.order_count) AS order_count,
SUM(daojia_home.order_custom) AS order_custom,
SUM(daojia_home.user_new_order_count) AS user_new_order_count ,
SUM(daojia_home.order_user_old_count) AS order_user_old_count,
SUM(daojia_home.bind_custom_count) AS bind_custom_count ,
SUM(daojia_home.bind_new_custom_count) AS bind_new_custom_count,
SUM(daojia_home.pay_custom) AS pay_custom,
SUM(daojia_home.download_app_custom)  AS download_app_custom
FROM t_sem_keyword AS  keyword
LEFT JOIN
(
SELECT t_daojia_hmsr.*,t_bdp_activity.* FROM 
(SELECT * FROM  t_daojia_hmsr WHERE stat_day = '20151011') AS t_daojia_hmsr
LEFT JOIN  (SELECT * FROM t_bdp_activity WHERE datatime = '2015-10-11'  GROUP BY channel) 
AS t_bdp_activity  
ON  t_daojia_hmsr.`hmsr` =  t_bdp_activity.`channel`
) AS daojia_home ON (daojia_home.hmsr LIKE keyword.hmsr)
WHERE keyword.stat_day = '20151011'
GROUP BY  keyword.st_id, keyword.hmsr
ORDER BY keyword.st_id

) keyword
GROUP BY keyword.stat_day 

```