date: "2016-05-03"
categories: 
  - java
title: java复习笔记(三)
tags : java
---

## 目的

工作几年，基础记了忘，忘了记，现在统一记录一下，后续都可以在这里进行回顾

## 内容

- 流

InputStream/Outputstream 只能操作字节，如果要操作字符需要使用Reader/Writer

要得到Reader或者Writer，需要使用Inputstream或者OutputStream。如：InputStreamReader inputStreamReader = new InputStreamReader(new FileInputStream(file));


此外、还可以用到commons-io中的一些方法进行读取，研究commons-io可以为后续对文件读写这一块提供便捷的方法



```java

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.apache.commons.io.IOUtils;
import org.junit.Before;
import org.junit.Test;

/**
 * @author liuyiyou.cn
 * @date 2017年5月6日 下午4:12:53
 * @version
 */
public class InputstreamTest {

    @Before
    public void before() {
        System.out.println("=====================================================================");
        System.out.println("当前工作目录::" + System.getProperty("user.dir"));
        File file = new File("java/input.txt");
        System.out.println("文件所在路径::" + file.getPath() + "\t绝对路径::" + file.getAbsolutePath());
        
    }
    
    @Test
    public void byteTest(){
        System.out.println("byte测试.......");
        System.out.println("99".getBytes());
        System.out.println(new String("abc".getBytes()));
    }

    /**
     * 读取字节
     * 
     * @throws IOException
     */
    @Test
    public void readByteTest() throws IOException {
        System.out.println("读取字节......");
        File file = new File("java/input.txt");
        InputStream in = new FileInputStream(file);
        int available = in.read();
        System.out.println("可读取字节数::" + available);
        if (available > 0) {
            byte[] data = new byte[available];
            in.read(data);
            System.out.println(Arrays.toString(data));
            System.out.println(new String(data));
        }
        in.close();
    }

    /**
     * 读取字符
     * 
     * @throws IOException
     */
    @Test
    public void readCharTest() throws IOException {
        System.out.println("读取字符.....装饰器模式");
        File file = new File("java/input.txt");
        InputStreamReader inputStreamReader = new InputStreamReader(new FileInputStream(file));
        char[] charData = new char[50];
        int charRead = inputStreamReader.read(charData, 0, 20);
        System.out.println("Read characters :" + charRead);
        System.out.println(Arrays.toString(charData));
        inputStreamReader.close();
    }
    
    
    
    /**
     * 已字节方式输出
     * @throws IOException
     */
    @Test
    public void outputTest() throws IOException{
        System.out.println("已字节方式输出.......");
        OutputStream out = new FileOutputStream(new File("java/output.txt"));
        byte[] bytes = "这是中文，this is english".getBytes();
        System.out.println(Arrays.toString(bytes));
        System.out.println(new String(bytes));
        out.write(bytes);
        out.close();
    }
    
    /**
     * 已字符方式输出
     * @throws IOException
     */
    @Test
    public void output2Test() throws IOException{
        System.out.println("以字符方式输出.....");
        OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream("java/output.txt"), "UTF-8");
        String str = "这是中文，this is english AAA";
        writer.write(str);
        writer.close();
    }
    
    
    @Test
    public void testIoUtils() throws FileNotFoundException, IOException{
        System.out.println("通过commons-io进行读取.....");
        List<String> lines = IOUtils.readLines(new InputStreamReader(new FileInputStream("java/input.txt")));
        for(String line:lines){
            System.out.println(line);
        }
    }
    
    
    @Test
    public void buffReader3Test() throws IOException{
        System.out.println("通过commons-io进行读取...更简单的方式..");
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream("java/input.txt")));
        System.out.println(IOUtils.toString(bufferedReader));;
    }
    
    @Test
    public void buffReaderTest() throws IOException{
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream("java/input.txt")));
        List<String> list = new ArrayList<String>();
        String line = bufferedReader.readLine();
        System.out.println(line);
        while (line != null) {
            list.add(line);
            line = bufferedReader.readLine();
            System.out.println(line);
        }
        bufferedReader.close();
    }
    


    @Test
    public void test3() throws MalformedURLException, IOException{
        InputStream in = new URL( "http://liuyiyou.cn" ).openStream();
         try {
           InputStreamReader inR = new InputStreamReader( in );
           BufferedReader buf = new BufferedReader( inR );
           String line;
           while ( ( line = buf.readLine() ) != null ) {
             System.out.println( line );
           }
         } finally {
           in.close();
         }
    }
    
}


```

